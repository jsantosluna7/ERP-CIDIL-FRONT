<div class="fondo d-flex justify-content-center p-4">
  <div class="row container w-75 h-auto border rounded-5 p-3 form mt-5">
    <h3>Carrito de Compras</h3>
    <hr />
    <div class="row">
      @if (carrito.length > 0) {
        @for (carta of carrito; track carta.id) {
          <div class="col-md-4 mb-3">
            <div class="card h-100 shadow-sm">
              @if (!carta.imagenEquipo || carta.imagenEquipo.trim() === '' || carta.imagenEquipo === 'null') {
                <img src="/Imagenes/Imagen de WhatsApp 2025-06-03 a las 14.17.00_691d2cbd.jpg" class="card-img-top"
                  alt="p" style="height: 300px; object-fit: cover;" />
              } @else {
                <img [src]="carta.imagenEquipo" class="card-img-top" alt="Imagen por defecto"
                  style="height: 300px; object-fit: cover;" />
              }

              <div class="card-body">
                <h5 class="card-title">{{ carta.nombreData }}</h5>
                <p class="card-text">Laboratorio: {{ carta.nombre }}</p>
                <p><strong>Stock disponible:</strong> {{ carta.cantidad }}</p>

                <!-- üëá Input para seleccionar cantidad -->
                <div class="mb-2">
                  <label for="cantidad{{ carta.id }}">Cantidad a prestar:</label>
                  <input
                    id="cantidad{{ carta.id }}"
                    type="number"
                    class="form-control"
                    [(ngModel)]="carta.cantidadSeleccionada"
                    [min]="1"
                    [max]="carta.cantidad"
                  />
                </div>

                <span class="badge" [ngClass]="carta.disponible ? 'bg-success' : 'bg-danger'">
                  {{ carta.disponible ? 'Disponible' : 'No disponible' }}
                </span>

                <div class="mb-2 mt-2">
                  <button class="btn btn-danger mt-2 w-100" (click)="eliminar(carta.id)">Eliminar</button>
                </div>
              </div>
            </div>
          </div>
        }

        <div class="text-center">
          <button class="btn btn-success mt-3 me-4" (click)="ruta()">Hacer Solicitud de Pr√©stamo</button>
          <button class="btn btn-warning mt-3" (click)="vaciar()">Vaciar Carrito</button>
        </div>
      } @else {
        <p>No hay productos en el carrito.</p>
      }
    </div>
  </div>
</div>
